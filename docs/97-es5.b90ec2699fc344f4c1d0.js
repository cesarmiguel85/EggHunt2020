function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var l=Object.prototype.toString.call(e).slice(8,-1);return"Object"===l&&e.constructor&&(l=e.constructor.name),"Map"===l||"Set"===l?Array.from(l):"Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var l=0,n=new Array(t);l<t;l++)n[l]=e[l];return n}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var l=[],n=!0,a=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(l.push(i.value),!t||l.length!==t);n=!0);}catch(u){a=!0,r=u}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}return l}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperties(e,t){for(var l=0;l<t.length;l++){var n=t[l];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,l){return t&&_defineProperties(e.prototype,t),l&&_defineProperties(e,l),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{PDvy:function(e,t,l){"use strict";l.r(t);var n=l("8Y7J"),a=function e(){_classCallCheck(this,e)},r=l("pMnS"),i=l("MKJQ"),o=l("sZkV"),u=l("R7Hv"),s=function(){function e(t,l,n){var a=this;_classCallCheck(this,e),this.route=t,this.router=l,this.mydata=n,this.alertclick=!0,this.pictures=[],this.total=0,this.remaining=0,this.markers=[],console.log(n),this.route.queryParams.subscribe((function(e){var t;a.router.getCurrentNavigation().extras.state&&(a.area=a.router.getCurrentNavigation().extras.state.area,console.log("AREA "+a.area),a.pictures=n.alldata[a.area].pictures,t=_slicedToArray(a.mydata.calcRemaining(a.area),2),a.remaining=t[0],a.total=t[1],a.mydata.checkDone(a.area),a.mydata.alldata[a.area].pictures[0].rectangles.forEach((function(e){var t={id:e.code,polygon_px:[[e.x-e.width,e.y],[e.x,e.y+e.height],[e.x+e.width,e.y],[e.x,e.y-e.height]],width:e.width,height:e.height,x:e.x,y:e.y,clickable:1,scale:1,svgStyle:{fill:"transparent",stroke:"transparent",strokeWidth:"0px"}},l={id:e.code,polygon_px:[[e.x-e.width,e.y],[e.x,e.y+e.height],[e.x+e.width,e.y],[e.x,e.y-e.height]],width:e.width,x:e.x,y:e.y,clickable:0,scale:1,tooltip:"D\xe9j\xe0 trouv\xe9",svgStyle:{fill:"rgba(200, 0, 0, 0.2)",stroke:"rgba(200, 0, 50, 0.8)",strokeWidth:"2px"}};a.mydata.myeggs.indexOf(e.code)>=0?a.markers.push(l):a.markers.push(t)})))}))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"foundEgg",value:function(e){var t;this.mydata.addEgg(e,this.area),t=_slicedToArray(this.mydata.calcRemaining(this.area),2),this.remaining=t[0],this.total=t[1]}},{key:"ionViewDidEnter",value:function(){var e=this;console.log(e.pictures[0].url);var t=PhotoSphereViewer({panorama:e.pictures[0].url,container:"photosphere",caption:"Swipe and pinch to search. Tap to catch.",navbar:!1,fisheye:!0,markers:e.markers,min_fov:1,max_fov:170,default_fov:e.pictures[0].default_fov?e.pictures[0].default_fov:40,anim_speed:"0.5rpm",default_lat:e.pictures[0].default_lat?e.pictures[0].default_lat:0,zoom_speed:1});t.on("select-marker",(function(l){1==l.clickable&&(e.foundEgg(l.id),console.log(l),t.addMarker({id:"done_"+l.id,x:l.x,y:l.y,polygon_px:[[l.x-l.width,l.y],[l.x,l.y+l.height],[l.x+l.width,l.y],[l.x,l.y-l.height]],tooltip:"Oeuf trouv\xe9",scale:1,clickable:0,svgStyle:{fill:"rgba(200, 0, 0, 0.2)",stroke:"rgba(200, 0, 50, 0.8)",strokeWidth:"2px"}}))})),e.alertclick&&t.on("dblclick",(function(t){console.log(t),e.mydata.presentToastBottom("Click coordinates >  X: "+t.texture_x+" | Y: "+t.texture_y)}))}}]),e}(),c=l("iInd"),h=n.nb({encapsulation:0,styles:[["#photosphere[_ngcontent-%COMP%]{background:#ddd;width:100%;height:100%}"]],data:{}});function b(e){return n.Hb(0,[(e()(),n.pb(0,0,null,null,16,"ion-header",[],null,null,null,i.F,i.k)),n.ob(1,49152,null,0,o.A,[n.h,n.k,n.x],null,null),(e()(),n.pb(2,0,null,0,14,"ion-toolbar",[],null,null,null,i.P,i.u)),n.ob(3,49152,null,0,o.yb,[n.h,n.k,n.x],null,null),(e()(),n.pb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,i.y,i.d)),n.ob(5,49152,null,0,o.k,[n.h,n.k,n.x],null,null),(e()(),n.pb(6,0,null,0,2,"ion-back-button",[["defaultHref","home"]],null,[[null,"click"]],(function(e,t,l){var a=!0;return"click"===t&&(a=!1!==n.Bb(e,8).onClick(l)&&a),a}),i.w,i.b)),n.ob(7,49152,null,0,o.f,[n.h,n.k,n.x],{defaultHref:[0,"defaultHref"]},null),n.ob(8,16384,null,0,o.g,[[2,o.eb],o.Db],{defaultHref:[0,"defaultHref"]},null),(e()(),n.pb(9,0,null,0,4,"ion-title",[],null,null,null,i.O,i.t)),n.ob(10,49152,null,0,o.wb,[n.h,n.k,n.x],null,null),(e()(),n.pb(11,0,null,0,1,"span",[["hideWhen","mobile,mobileweb"]],null,null,null,null,null)),(e()(),n.Gb(12,null,[""," "])),(e()(),n.Gb(13,0,["","!"])),(e()(),n.pb(14,0,null,0,2,"ion-title",[["slot","end"]],null,null,null,i.O,i.t)),n.ob(15,49152,null,0,o.wb,[n.h,n.k,n.x],null,null),(e()(),n.Gb(16,0,[""," ","/",""])),(e()(),n.pb(17,0,null,null,2,"ion-content",[],null,null,null,i.E,i.j)),n.ob(18,49152,null,0,o.t,[n.h,n.k,n.x],null,null),(e()(),n.pb(19,0,null,0,0,"div",[["id","photosphere"]],null,null,null,null,null))],(function(e,t){e(t,7,0,"home"),e(t,8,0,"home")}),(function(e,t){var l=t.component;e(t,12,0,l.mydata.allmessages.imageviewer_title),e(t,13,0,l.mydata.alldata[l.area].area),e(t,16,0,l.mydata.allmessages.imageviewer_found,l.total-l.remaining,l.total)}))}var d=n.lb("app-imageviewer360",s,(function(e){return n.Hb(0,[(e()(),n.pb(0,0,null,null,1,"app-imageviewer360",[],null,null,null,b,h)),n.ob(1,114688,null,0,s,[c.a,c.m,u.a],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]),p=l("SVse"),y=l("s7LF"),f=function e(){_classCallCheck(this,e)};l.d(t,"Imageviewer360PageModuleNgFactory",(function(){return g}));var g=n.mb(a,[],(function(e){return n.yb([n.zb(512,n.j,n.X,[[8,[r.a,d]],[3,n.j],n.v]),n.zb(4608,p.l,p.k,[n.s,[2,p.t]]),n.zb(4608,y.i,y.i,[]),n.zb(4608,o.a,o.a,[n.x,n.g]),n.zb(4608,o.Cb,o.Cb,[o.a,n.j,n.p]),n.zb(4608,o.Fb,o.Fb,[o.a,n.j,n.p]),n.zb(1073742336,p.b,p.b,[]),n.zb(1073742336,y.h,y.h,[]),n.zb(1073742336,y.a,y.a,[]),n.zb(1073742336,o.Ab,o.Ab,[]),n.zb(1073742336,c.n,c.n,[[2,c.s],[2,c.m]]),n.zb(1073742336,f,f,[]),n.zb(1073742336,a,a,[]),n.zb(1024,c.k,(function(){return[[{path:"",component:s}]]}),[])])}))}}]);