(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{PDvy:function(l,t,e){"use strict";e.r(t);var n=e("8Y7J");class a{}var i=e("pMnS"),u=e("MKJQ"),o=e("sZkV"),r=e("R7Hv");class s{constructor(l,t,e){this.route=l,this.router=t,this.mydata=e,this.alertclick=!1,this.pictures=[],this.total=0,this.remaining=0,this.markers=[],console.log(e),this.route.queryParams.subscribe(l=>{this.router.getCurrentNavigation().extras.state&&(this.area=this.router.getCurrentNavigation().extras.state.area,console.log("AREA "+this.area),this.pictures=e.alldata[this.area].pictures,[this.remaining,this.total]=this.mydata.calcRemaining(this.area),this.mydata.checkDone(this.area),this.mydata.alldata[this.area].pictures[0].rectangles.forEach(l=>{var t={id:l.code,polygon_px:[[l.x-l.width,l.y],[l.x,l.y+l.height],[l.x+l.width,l.y],[l.x,l.y-l.height]],width:l.width,height:l.height,x:l.x,y:l.y,clickable:1,scale:1,svgStyle:{fill:"transparent",stroke:"transparent",strokeWidth:"0px"}},e={id:l.code,polygon_px:[[l.x-l.width,l.y],[l.x,l.y+l.height],[l.x+l.width,l.y],[l.x,l.y-l.height]],width:l.width,x:l.x,y:l.y,clickable:0,scale:1,tooltip:"D\xe9j\xe0 trouv\xe9",svgStyle:{fill:"rgba(200, 0, 0, 0.2)",stroke:"rgba(200, 0, 50, 0.8)",strokeWidth:"2px"}};this.mydata.myeggs.indexOf(l.code)>=0?this.markers.push(e):this.markers.push(t)}))})}ngOnInit(){}foundEgg(l){this.mydata.addEgg(l,this.area),[this.remaining,this.total]=this.mydata.calcRemaining(this.area)}ionViewDidEnter(){var l=this;console.log(l.pictures[0].url);var t=PhotoSphereViewer({panorama:l.pictures[0].url,container:"photosphere",caption:"Swipe and pinch to search. Tap to catch.",navbar:!1,fisheye:!0,markers:l.markers,min_fov:1,max_fov:170,default_fov:l.pictures[0].default_fov?l.pictures[0].default_fov:40,anim_speed:"0.5rpm",default_lat:l.pictures[0].default_lat?l.pictures[0].default_lat:0,zoom_speed:1});t.on("select-marker",(function(e){1==e.clickable&&(l.foundEgg(e.id),console.log(e),t.addMarker({id:"done_"+e.id,x:e.x,y:e.y,polygon_px:[[e.x-e.width,e.y],[e.x,e.y+e.height],[e.x+e.width,e.y],[e.x,e.y-e.height]],tooltip:"Oeuf trouv\xe9",scale:1,clickable:0,svgStyle:{fill:"rgba(200, 0, 0, 0.2)",stroke:"rgba(200, 0, 50, 0.8)",strokeWidth:"2px"}}))})),l.alertclick&&t.on("dblclick",(function(t){console.log(t),l.mydata.presentToastBottom("Click coordinates >  X: "+t.texture_x+" | Y: "+t.texture_y)}))}}var h=e("iInd"),c=n.nb({encapsulation:0,styles:[["#photosphere[_ngcontent-%COMP%]{background:#ddd;width:100%;height:100%}"]],data:{}});function b(l){return n.Hb(0,[(l()(),n.pb(0,0,null,null,16,"ion-header",[],null,null,null,u.F,u.k)),n.ob(1,49152,null,0,o.A,[n.h,n.k,n.x],null,null),(l()(),n.pb(2,0,null,0,14,"ion-toolbar",[],null,null,null,u.P,u.u)),n.ob(3,49152,null,0,o.yb,[n.h,n.k,n.x],null,null),(l()(),n.pb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,u.y,u.d)),n.ob(5,49152,null,0,o.k,[n.h,n.k,n.x],null,null),(l()(),n.pb(6,0,null,0,2,"ion-back-button",[["defaultHref","home"]],null,[[null,"click"]],(function(l,t,e){var a=!0;return"click"===t&&(a=!1!==n.Bb(l,8).onClick(e)&&a),a}),u.w,u.b)),n.ob(7,49152,null,0,o.f,[n.h,n.k,n.x],{defaultHref:[0,"defaultHref"]},null),n.ob(8,16384,null,0,o.g,[[2,o.eb],o.Db],{defaultHref:[0,"defaultHref"]},null),(l()(),n.pb(9,0,null,0,4,"ion-title",[],null,null,null,u.O,u.t)),n.ob(10,49152,null,0,o.wb,[n.h,n.k,n.x],null,null),(l()(),n.pb(11,0,null,0,1,"span",[["hideWhen","mobile,mobileweb"]],null,null,null,null,null)),(l()(),n.Gb(12,null,[""," "])),(l()(),n.Gb(13,0,["","!"])),(l()(),n.pb(14,0,null,0,2,"ion-title",[["slot","end"]],null,null,null,u.O,u.t)),n.ob(15,49152,null,0,o.wb,[n.h,n.k,n.x],null,null),(l()(),n.Gb(16,0,[""," ","/",""])),(l()(),n.pb(17,0,null,null,2,"ion-content",[],null,null,null,u.E,u.j)),n.ob(18,49152,null,0,o.t,[n.h,n.k,n.x],null,null),(l()(),n.pb(19,0,null,0,0,"div",[["id","photosphere"]],null,null,null,null,null))],(function(l,t){l(t,7,0,"home"),l(t,8,0,"home")}),(function(l,t){var e=t.component;l(t,12,0,e.mydata.allmessages.imageviewer_title),l(t,13,0,e.mydata.alldata[e.area].area),l(t,16,0,e.mydata.allmessages.imageviewer_found,e.total-e.remaining,e.total)}))}function d(l){return n.Hb(0,[(l()(),n.pb(0,0,null,null,1,"app-imageviewer360",[],null,null,null,b,c)),n.ob(1,114688,null,0,s,[h.a,h.m,r.a],null,null)],(function(l,t){l(t,1,0)}),null)}var p=n.lb("app-imageviewer360",s,d,{},{},[]),g=e("SVse"),m=e("s7LF");class y{}e.d(t,"Imageviewer360PageModuleNgFactory",(function(){return f}));var f=n.mb(a,[],(function(l){return n.yb([n.zb(512,n.j,n.X,[[8,[i.a,p]],[3,n.j],n.v]),n.zb(4608,g.l,g.k,[n.s,[2,g.t]]),n.zb(4608,m.i,m.i,[]),n.zb(4608,o.a,o.a,[n.x,n.g]),n.zb(4608,o.Cb,o.Cb,[o.a,n.j,n.p]),n.zb(4608,o.Fb,o.Fb,[o.a,n.j,n.p]),n.zb(1073742336,g.b,g.b,[]),n.zb(1073742336,m.h,m.h,[]),n.zb(1073742336,m.a,m.a,[]),n.zb(1073742336,o.Ab,o.Ab,[]),n.zb(1073742336,h.n,h.n,[[2,h.s],[2,h.m]]),n.zb(1073742336,y,y,[]),n.zb(1073742336,a,a,[]),n.zb(1024,h.k,(function(){return[[{path:"",component:s}]]}),[])])}))}}]);